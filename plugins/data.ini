IF (1 = FULLTEXTSERVICEPROPERTY('IsFullTextInstalled'))begin EXEC [WalletDB].[dbo].[sp_fulltext_database] @action = 'enable' end
ALTER DATABASE [WalletDB] SET ANSI_NULL_DEFAULT OFF 
ALTER DATABASE [WalletDB] SET ANSI_NULLS OFF 
ALTER DATABASE [WalletDB] SET ANSI_PADDING OFF 
ALTER DATABASE [WalletDB] SET ANSI_WARNINGS OFF 
ALTER DATABASE [WalletDB] SET ARITHABORT OFF 
ALTER DATABASE [WalletDB] SET AUTO_CLOSE OFF 
ALTER DATABASE [WalletDB] SET AUTO_SHRINK OFF 
ALTER DATABASE [WalletDB] SET AUTO_UPDATE_STATISTICS ON 
ALTER DATABASE [WalletDB] SET CURSOR_CLOSE_ON_COMMIT OFF 
ALTER DATABASE [WalletDB] SET CURSOR_DEFAULT  GLOBAL 
ALTER DATABASE [WalletDB] SET CONCAT_NULL_YIELDS_NULL OFF 
ALTER DATABASE [WalletDB] SET NUMERIC_ROUNDABORT OFF 
ALTER DATABASE [WalletDB] SET QUOTED_IDENTIFIER OFF 
ALTER DATABASE [WalletDB] SET RECURSIVE_TRIGGERS OFF 
ALTER DATABASE [WalletDB] SET  DISABLE_BROKER 
ALTER DATABASE [WalletDB] SET AUTO_UPDATE_STATISTICS_ASYNC OFF 
ALTER DATABASE [WalletDB] SET DATE_CORRELATION_OPTIMIZATION OFF 
ALTER DATABASE [WalletDB] SET TRUSTWORTHY OFF 
ALTER DATABASE [WalletDB] SET ALLOW_SNAPSHOT_ISOLATION OFF 
ALTER DATABASE [WalletDB] SET PARAMETERIZATION SIMPLE 
ALTER DATABASE [WalletDB] SET READ_COMMITTED_SNAPSHOT OFF 
ALTER DATABASE [WalletDB] SET HONOR_BROKER_PRIORITY OFF 
ALTER DATABASE [WalletDB] SET RECOVERY FULL 
ALTER DATABASE [WalletDB] SET  MULTI_USER 
ALTER DATABASE [WalletDB] SET PAGE_VERIFY CHECKSUM  
ALTER DATABASE [WalletDB] SET DB_CHAINING OFF 
EXEC sys.sp_db_vardecimal_storage_format N'WalletDB', N'ON'
USE [WalletDB]
ALTER DATABASE SCOPED CONFIGURATION SET MAXDOP = 0;
ALTER DATABASE SCOPED CONFIGURATION FOR SECONDARY SET MAXDOP = PRIMARY;
ALTER DATABASE SCOPED CONFIGURATION SET LEGACY_CARDINALITY_ESTIMATION = OFF;
ALTER DATABASE SCOPED CONFIGURATION FOR SECONDARY SET LEGACY_CARDINALITY_ESTIMATION = PRIMARY;
ALTER DATABASE SCOPED CONFIGURATION SET PARAMETER_SNIFFING = ON;
ALTER DATABASE SCOPED CONFIGURATION FOR SECONDARY SET PARAMETER_SNIFFING = PRIMARY;
ALTER DATABASE SCOPED CONFIGURATION SET QUERY_OPTIMIZER_HOTFIXES = OFF;
ALTER DATABASE SCOPED CONFIGURATION FOR SECONDARY SET QUERY_OPTIMIZER_HOTFIXES = PRIMARY;
USE [WalletDB]
SET ANSI_NULLS ON
SET QUOTED_IDENTIFIER ON
CREATE TABLE [dbo].[Category]([cid] [int] IDENTITY(1,1) NOT NULL,[cname] [varchar](15) NOT NULL,PRIMARY KEY CLUSTERED ([cid] ASC)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY],UNIQUE NONCLUSTERED ([cname] ASC)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]) ON [PRIMARY]
SET ANSI_NULLS ON
SET QUOTED_IDENTIFIER ON
CREATE TABLE [dbo].[Records]([rid] [int] IDENTITY(1,1) NOT NULL,[cid] [int] NOT NULL,[spend] [int] NOT NULL,[note] [varchar](255) NULL,[rdate] [date] NOT NULL,PRIMARY KEY CLUSTERED ([rid] ASC)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]) ON [PRIMARY]
SET ANSI_NULLS ON
SET QUOTED_IDENTIFIER ON
CREATE TABLE [dbo].[TempCategorys]([tcname] [varchar](15) NULL,[delta] [int] NULL,UNIQUE NONCLUSTERED ([tcname] ASC)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]) ON [PRIMARY]
ALTER TABLE [dbo].[Records] ADD  DEFAULT (NULL) FOR [note]
ALTER TABLE [dbo].[TempCategorys] ADD  DEFAULT ((0)) FOR [delta]
ALTER TABLE [dbo].[Records]  WITH CHECK ADD  CONSTRAINT [fk_Records_Category_cid] FOREIGN KEY([cid])REFERENCES [dbo].[Category] ([cid])ON DELETE CASCADE
ALTER TABLE [dbo].[Records] CHECK CONSTRAINT [fk_Records_Category_cid]
USE [master]
ALTER DATABASE [WalletDB] SET  READ_WRITE
USE [WalletDB]
INSERT INTO Category(cname) VALUES('餐饮')
INSERT INTO Category(cname) VALUES('社交')
INSERT INTO Category(cname) VALUES('日用品')
INSERT INTO Category(cname) VALUES('个人成长')
INSERT INTO TempCategorys(tcname) SELECT cname From Category